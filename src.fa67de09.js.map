{"version":3,"sources":["js/api-service.js","js/refs.js","js/searchMovie.js","js/moviesMarkup.js","js/library.js","js/modal.js","js/pagination-class.js","js/movie-pagination.js","js/popularFilms.js","js/render-home-page.js","js/btn-top.js","js/moon-sun.js","js/on-check-theme.js","js/footer-modal.js","js/local-storage.js","js/openModal.js","index.js"],"names":["API_KEY","BASE_URL","ApiService","consructor","searchQuery","page","fetchMovies","endpoint","url","fetch","then","res","ok","json","Promise","reject","Error","fetchMovieBySearch","fetchGenres","fetchPopularMovie","response","results","fetchInfoOfFilm","movie_id","query","newQuery","refs","closeIcon","document","querySelector","modal","searchBtn","libraryBtn","galleryMovies","watchedBtn","headerBtn","querySelectorAll","containerHeader","libraryLi","homeLi","spanHome","spanLibrary","libraryBtnList","closeModalBtn","backdrop","emptyResult","backgroundContent","logo","footerLink","footerBackdrop","body","footerModal","modalCloseBtn","toBtnTop","spiner","modalInfo","genresArr","api","getMovie","e","style","display","preventDefault","innerHTML","currentTarget","elements","value","trim","data","length","textContent","renderMovies","forEach","film","remove","catch","err","handleError","message","console","log","markup","setTimeout","getGenres","genres","map","genre","push","addEventListener","makeMovieMarkup","movies","title","name","release_date","first_air_date","genre_ids","poster_path","vote_average","id","filteredGenresArr","reduce","acc","el","slice","join","filter","genreId","includes","releaseYear","Date","getFullYear","alternativeDate","poster","emptyImg","library","ev","target","type","JSON","parse","localStorage","getItem","classList","contains","add","libraryClick","onCloseModal","window","removeEventListener","onEscBtnClick","onBackdropClick","event","code","Pagination","constructor","initialPage","total","onChange","currentPage","nextPage","prevPage","beforePrevPage","afterNextPage","firstPage","lastPage","prevPageRef","nextPageRef","currentPageRef","beforeCurrentPageRef","afterCurrentPageRef","beforeBeforeCurrentPageRef","afterAfterCurrentPageRef","firstPageRef","lastPageRef","prevDotsRef","lastDotsRef","hidden","moviePagination","NewFetchApi","fetchPopularFilms","onClickHomeBtn","onScroll","scrolled","pageYOffset","coords","documentElement","clientHeight","onToTopBtn","scrollTo","top","behavior","chk","getElementById","addDarkTheme","checked","removeItem","setItem","onCheckTheme","backgroundColor","onOpenFooterModal","onCloseFooterModalOnEsc","overflow","onCloseFooterModal","onCloseModalOnBackdropClick","LocalStorageService","_watched","_queue","key","watchedParseList","addMovie","obj","userDataJSON","stringify","libraryWatched","find","item","libraryQueue","deleteMovie","movieIndex","findIndex","splice","checkMovie","newFetchMovieById","localStorageService","onOpenModal","idOfCard","parentElement","filmInfo","renderMarkupOfModal","watchBtn","watchBtnDelete","queueBtn","queueBtnDelete","watchedLibrary","queueLibrary","movieKey","dataset","error","closest","renderOfErrorMarkup","renderOfModal","original_title","overview","popularity","vote_count","listOfGenres","renderOfError"],"mappings":"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","file":"src.fa67de09.js","sourceRoot":"../src","sourcesContent":["const API_KEY = '3b4cb0b5c3c509ec710c203c7a14be66';\r\nconst BASE_URL = 'https://api.themoviedb.org/3';\r\n\r\nexport default class ApiService {\r\n  consructor() {\r\n    this.searchQuery = '';\r\n    this.page = 1;\r\n  }\r\n\r\n  fetchMovies(endpoint) {\r\n    const url = `${BASE_URL}/${endpoint}?api_key=${API_KEY}&language=en-US&query=${this.searchQuery}&page=${this.page}&include_adult=false`;\r\n    return fetch(url).then(res => {\r\n      if (res.ok) {\r\n        return res.json();\r\n      }\r\n      return Promise.reject(new Error('Oops! Search bar is empty.'));\r\n    });\r\n  }\r\n\r\n  fetchMovieBySearch() {\r\n    return this.fetchMovies('search/movie');\r\n  }\r\n\r\n  fetchGenres() {\r\n    return fetch(`${BASE_URL}/genre/movie/list?api_key=${API_KEY}`).then(res => res.json());\r\n  }\r\n\r\n  fetchPopularMovie() {\r\n    const url = `${BASE_URL}/trending/all/day?api_key=${API_KEY}`;\r\n    return fetch(url)\r\n      .then(response => response.json())\r\n      .then(results => {\r\n        return results;\r\n      });\r\n  }\r\n\r\n  fetchInfoOfFilm(movie_id) {\r\n    const url = `${BASE_URL}/movie/${movie_id}?api_key=${API_KEY}&language=en-US`;\r\n    return fetch(url)\r\n      .then(response => response.json())\r\n      .then(results => {\r\n        return results;\r\n      });\r\n  }\r\n\r\n  get query() {\r\n    return this.searchQuery;\r\n  }\r\n\r\n  set query(newQuery) {\r\n    this.searchQuery = newQuery;\r\n  }\r\n}\r\n","const refs = {\r\n  closeIcon: document.querySelector('.modal__close-icon'),\r\n  modal: document.querySelector('.modal'),\r\n  searchBtn: document.querySelector('.search-form'),\r\n  libraryBtn: document.querySelector('header'),\r\n  galleryMovies: document.querySelector('.gallery-movies'),\r\n  watchedBtn: document.querySelector('button[name=watched]'),\r\n  headerBtn: document.querySelectorAll('.library-button'),\r\n  containerHeader: document.querySelector('.content'),\r\n  libraryLi: document.querySelector('.library'),\r\n  homeLi: document.querySelector('.home'),\r\n  spanHome: document.querySelector('.span-home'),\r\n  spanLibrary: document.querySelector('.span-library'),\r\n  libraryBtnList: document.querySelector('.button__list__library'),\r\n  closeModalBtn: document.querySelector('.modal__close-btn'),\r\n  backdrop: document.querySelector('.backdrop'),\r\n  emptyResult: document.querySelector('.empty-result'),\r\n  backgroundContent: document.querySelector('.content'),\r\n  logo: document.querySelector('.nav__logo'),\r\n  footerLink: document.querySelector('.footer__modal-open'),\r\n  footerBackdrop: document.querySelector('[data-action=\"deleted-class\"]'),\r\n  body: document.querySelector('body'),\r\n  footerModal: document.querySelector('div[data-action=\"check-theme\"]'),\r\n  modalCloseBtn: document.querySelector('.footer-modal__close-btn'),\r\n  toBtnTop: document.querySelector('.btn-to-top'),\r\n  spiner: document.querySelector('.foo'),\r\n  modalInfo: document.querySelector('.modal_info-total'),\r\n};\r\n\r\nexport default refs;\r\n","import refs from './refs';\r\nimport ApiService from './api-service';\r\nimport makeMovieMarkup from './moviesMarkup';\r\n\r\nconst api = new ApiService();\r\n\r\nrefs.searchBtn.addEventListener('submit', getMovie);\r\n\r\nfunction getMovie(e) {\r\n  refs.spiner.style.display = 'block';\r\n  e.preventDefault();\r\n  refs.emptyResult.innerHTML = '';\r\n  api.query = e.currentTarget.elements.searchQuery.value.trim();\r\n  api\r\n    .fetchMovieBySearch()\r\n    .then(data => {\r\n      if (data.results.length === 0) {\r\n        refs.emptyResult.textContent =\r\n          'Search result not successful. Enter the correct movie name and try again.';\r\n      }\r\n      renderMovies(data);\r\n      const filmInfoRate = document.querySelectorAll('.film-info__rate');\r\n      filmInfoRate.forEach(film => film.remove());\r\n      refs.searchBtn.searchQuery.value = '';\r\n     \r\n    })\r\n    .catch(err => handleError(err));\r\n}\r\n\r\nfunction handleError(err) {\r\n  refs.galleryMovies.innerHTML = '';\r\n  refs.emptyResult.innerHTML = err.message;\r\n}\r\n\r\nfunction renderMovies(data) {\r\n  console.log(data.results);\r\n  const markup = makeMovieMarkup(data.results);\r\n  refs.galleryMovies.innerHTML = markup;\r\n  setTimeout(()=>{refs.spiner.style.display = 'none';},500)\r\n  \r\n}\r\n\r\nfunction getGenres() {\r\n  let genresArr = [];\r\n  api\r\n    .fetchGenres()\r\n    .then(data => {\r\n      data.genres.map(genre => genresArr.push(genre));\r\n    })\r\n    .catch(err => handleError(err));\r\n\r\n  return genresArr;\r\n}\r\n\r\nconst genresArr = getGenres();\r\nexport default genresArr;\r\n","import emptyImg from './images/img_not_found.jpg';\r\nimport getGenres from './searchMovie';\r\nimport genresArr from './searchMovie';\r\n\r\nfunction makeMovieMarkup(movies) {\r\n  return movies\r\n    .map(\r\n      ({\r\n        title,\r\n        name,\r\n        release_date,\r\n        first_air_date,\r\n        genre_ids,\r\n        genres,\r\n        poster_path,\r\n        vote_average,\r\n        id,\r\n      }) => {\r\n        let filteredGenresArr = 'Other';\r\n\r\n        if (genres && genres.length > 0) {\r\n          filteredGenresArr =\r\n            genres\r\n              .reduce((acc, el) => [...acc, el.name], [])\r\n              .slice(0, 2)\r\n              .join(', ') + ', Other';\r\n        }\r\n\r\n        if (genre_ids && genre_ids.length !== 0) {\r\n          filteredGenresArr =\r\n            genresArr\r\n              .filter(genreId => genre_ids.includes(genreId.id))\r\n              .map(genre => genre.name)\r\n              .slice(0, 2)\r\n              .join(', ') + ', Other';\r\n        }\r\n        let releaseYear = new Date(release_date).getFullYear();\r\n        let alternativeDate = new Date(first_air_date).getFullYear();\r\n        let poster = emptyImg;\r\n        if (poster_path) {\r\n          poster = `https://image.tmdb.org/t/p/w500${poster_path}`;\r\n        }\r\n        return `<div class=\"photo-card\" id=\"${id}\">\r\n        <div class=\"gallery-list__item\">\r\n\r\n            <img class=\"image\" src=${poster}\r\n              alt=\"${title}\"\r\n              loading=\"lazy\"\r\n              width=\"309\"\r\n              height=\"449\" />\r\n        </div>\r\n        <div class=\"info\">\r\n          <h5 class=\"gallery-list__item-title\">${title || name}\r\n          </h5>\r\n          <div class=\"film-info-cont\">\r\n          <p class=\"film-info\">${filteredGenresArr}\r\n          <span class=\"film-info__slash\">|</span>\r\n          </p>\r\n          <p class=\"film-info__year\">${releaseYear || alternativeDate || ''}\r\n          <span class=\"film-info__rate\">${vote_average}</span>\r\n          </p>\r\n          </div>\r\n        </div>\r\n    </div>`;\r\n      },\r\n    )\r\n    .join('');\r\n}\r\n\r\nexport default makeMovieMarkup;\r\n","import refs from './refs';\nimport makeMovieMarkup from './moviesMarkup';\n\nrefs.libraryBtn.addEventListener('click', library);\nrefs.libraryLi.addEventListener('click', libraryClick);\n\nfunction library(ev) {\n  if (ev.target.type !== 'button') return;\n\n  const data = JSON.parse(localStorage.getItem(ev.target.name));\n\n  if (!ev.target.classList.contains('active')) {\n    refs.headerBtn.forEach(el => {\n      el.classList.remove('active');\n    });\n    ev.target.classList.add('active');\n  }\n  if (data && data.length > 0) {\n    const markup = makeMovieMarkup(data);\n    refs.galleryMovies.innerHTML = markup;\n    return;\n  }\n  refs.galleryMovies.innerHTML = '<p class=\"empty-library\"> There are no films added.<p>';\n}\n\nfunction libraryClick(ev) {\n  ev.preventDefault();\n  refs.spanHome.style.display = 'none';\n  refs.spanLibrary.style.display = 'block';\n  refs.searchBtn.style.display = 'none';\n  refs.libraryBtnList.style.display = 'flex';\n  refs.containerHeader.classList.add('library-content');\n\n  refs.libraryBtnList.style.display = 'flex';\n  refs.watchedBtn.classList.add('active');\n\n  const data = JSON.parse(localStorage.getItem('watched'));\n\n  if (data && data.length > 0) {\n    const markup = makeMovieMarkup(data);\n    refs.galleryMovies.innerHTML = markup;\n    return;\n  }\n  refs.galleryMovies.innerHTML = '<p class=\"empty-library\"> There are no films added.<p>';\n}\n","import refs from './refs';\n\nrefs.closeModalBtn.addEventListener('click', onCloseModal);\nrefs.backdrop.addEventListener('click', onBackdropClick);\nwindow.addEventListener('keydown', onEscBtnClick);\n\nfunction onCloseModal() {\n    window.removeEventListener('keydown', onEscBtnClick)\n    refs.backdrop.classList.add('is-hidden')\n}\n\nfunction onBackdropClick(event) {\n    if (event.currentTarget === event.target) {\n        refs.backdrop.classList.add('is-hidden')\n    }\n}\n\nfunction onEscBtnClick(event) {\n    if (event.code === 'Escape') {\n        onCloseModal(event);\n    }\n}","export class Pagination {\n  #currentPage = 1;\n\n  constructor({ initialPage = 1, total = 1, onChange }) {\n    this.#currentPage = initialPage;\n    this.total = total;\n    this.onChange = onChange;\n  }\n\n  get currentPage() {\n    return this.#currentPage;\n  }\n\n  set currentPage(value) {\n    this.#currentPage = value;\n\n    if (this.onChange) {\n      this.onChange(value);\n    }\n  }\n\n  nextPage() {\n    if (this.currentPage === this.total) {\n      return;\n    }\n\n    this.currentPage += 1;\n  }\n\n  prevPage() {\n      if (this.currentPage === 1) {\n      return;\n      }\n    this.currentPage -= 1;\n    }\n    \n    beforePrevPage() {\n      if (this.currentPage <= 1) {\n      return;\n      }\n    this.currentPage -= 2;\n    }\n\n    afterNextPage() {\n      if (this.currentPage > this.total - 2) {\n      return;\n      }\n    this.currentPage += 2;\n    }\n\n    firstPage() {\n        this.currentPage = 1;  \n    }\n\n    lastPage() {\n        this.currentPage = this.total;  \n    }\n}","import ApiService from './api-service';\nimport { Pagination } from './pagination-class';\n\nconst prevPageRef = document.querySelector(\".prev\");\nconst nextPageRef = document.querySelector(\".next\");\nconst currentPageRef = document.querySelector(\".current-page\");\nconst beforeCurrentPageRef = document.querySelector(\".before-page\");\nconst afterCurrentPageRef = document.querySelector(\".after-page\");\nconst beforeBeforeCurrentPageRef = document.querySelector(\".before-page__before\");\nconst afterAfterCurrentPageRef = document.querySelector(\".after-page__after\");\nconst firstPageRef = document.querySelector('.first');\nconst lastPageRef = document.querySelector('.last');\nconst prevDotsRef = document.querySelector('.dots-prev');\nconst lastDotsRef = document.querySelector('.dots-last');\n\nbeforeCurrentPageRef.hidden = true;\nprevPageRef.hidden = true;\nbeforeBeforeCurrentPageRef.hidden = true;\nfirstPageRef.hidden = true;\nprevDotsRef.style.display = 'none';\nlastDotsRef.style.display = 'flex';\n\nconst api = new ApiService();\n\nconst moviePagination = new Pagination({\n  total: 20,\n  onChange(value) {\n    \n    currentPageRef.textContent = value;\n    beforeCurrentPageRef.textContent = value - 1;\n    afterCurrentPageRef.textContent = value + 1;\n    beforeBeforeCurrentPageRef.textContent = value - 2;\n    afterAfterCurrentPageRef.textContent = value + 2;\n    lastPageRef.textContent = this.total;\n      \n    if (value < 2) {\n      beforeCurrentPageRef.hidden = true;\n      prevPageRef.hidden = true;\n      } else {\n      beforeCurrentPageRef.hidden = false;\n      prevPageRef.hidden = false;\n    }\n\n    if (value < 3) {\n      beforeBeforeCurrentPageRef.hidden = true;\n      firstPageRef.hidden = true;\n    } else {\n      beforeBeforeCurrentPageRef.hidden = false;\n      firstPageRef.hidden = false;\n    }\n\n    if (value < 4) {\n      firstPageRef.hidden = true;\n    } else {\n      firstPageRef.hidden = false;\n    }\n\n     if (value < 5) {\n      prevDotsRef.style.display = 'none';\n      } else {\n      prevDotsRef.style.display = 'flex';\n    }\n    \n    if (value > this.total - 1) {\n      lastPageRef.hidden = true;\n    } else {\n      lastPageRef.hidden = false;\n    }\n\n    if (value > this.total - 4) {\n      lastDotsRef.style.display = 'none';\n      } else {\n      lastDotsRef.style.display = 'flex';\n    }\n   \n    if (value > this.total - 3) {\n      afterAfterCurrentPageRef.hidden = true;\n      \n    } else {\n      afterAfterCurrentPageRef.hidden = false;\n      \n    }\n    if (value > this.total - 2) {\n      afterCurrentPageRef.hidden = true;\n      \n    } else {\n      afterCurrentPageRef.hidden = false;\n      \n    }\n      \n     if (value > this.total - 1) {\n      nextPageRef.hidden = true;\n    } else {\n      nextPageRef.hidden = false;\n    }},\n});\n\n\nnextPageRef.addEventListener('click', () => {\n  moviePagination.nextPage();\n});\n\nprevPageRef.addEventListener('click', () => {\n  moviePagination.prevPage();\n});\n\nbeforeCurrentPageRef.addEventListener('click', () => {\n  moviePagination.prevPage();\n})\n\nafterCurrentPageRef.addEventListener('click', () => {\n  moviePagination.nextPage();\n  })\n\nbeforeBeforeCurrentPageRef.addEventListener('click', () => {\n  moviePagination.beforePrevPage();\n})\n\nafterAfterCurrentPageRef.addEventListener('click', () => {\n  moviePagination.afterNextPage();\n})\n\nfirstPageRef.addEventListener('click', () => {\n  moviePagination.firstPage();\n})\n\nlastPageRef.addEventListener('click', () => {\n  moviePagination.lastPage();\n})\n","import ApiService from './api-service';\nimport makeMovieMarkup from './moviesMarkup';\nimport refs from './refs';\n\nconst NewFetchApi = new ApiService();\n\nexport function fetchPopularFilms() {\n  refs.emptyResult.innerHTML = '';\n  NewFetchApi.fetchPopularMovie().then(film => {\n    const markup = makeMovieMarkup(film.results);\n    refs.galleryMovies.innerHTML = markup;\n  });\n}\nfetchPopularFilms();\n","import refs from './refs';\nimport { fetchPopularFilms } from './popularFilms';\n\nconst onClickHomeBtn = event => {\n  event.preventDefault();\n  refs.spanHome.style.display = 'block';\n  refs.spanLibrary.style.display = 'none';\n  refs.searchBtn.style.display = 'block';\n  refs.libraryBtnList.style.display = 'none';\n  refs.backgroundContent.classList.remove('library-content');\n  fetchPopularFilms();\n};\n\nrefs.homeLi.addEventListener('click', onClickHomeBtn);\nrefs.logo.addEventListener('click', onClickHomeBtn);\n","import refs from './refs';\n\nwindow.addEventListener('scroll', onScroll);\nrefs.toBtnTop.addEventListener('click', onToTopBtn);\n\nfunction onScroll() {\n  const scrolled = window.pageYOffset\n  const coords = document.documentElement.clientHeight\n\n  if (scrolled > coords) {\n    refs.toBtnTop.classList.add('btn-to-top--visible')\n  }\n  if (scrolled < coords) {\n    refs.toBtnTop.classList.remove('btn-to-top--visible')\n  }\n}\n\nfunction onToTopBtn() {\n  if (window.pageYOffset > 0) {\n    window.scrollTo({ top: 0, behavior: 'smooth' })\n  }\n}\n\n","\nconst chk = document.getElementById('chk');\n\n\nchk.addEventListener('change', () => {\n    \n\n    if (localStorage.getItem('theme') === 'dark') {\n        localStorage.removeItem('theme');\n    }\n    else {\n        localStorage.setItem('theme', 'dark');\n    }\n\n    addDarkTheme();\n   \n});\n\nfunction addDarkTheme() {\n    try {\n\n        if (localStorage.getItem('theme') === 'dark') {\n\n            document.body.classList.add('dark');\n            chk.checked = true;\n        }\n        else {\n            document.body.classList.remove('dark');\n            chk.checked = false;\n        }\n        \n    }catch(err) { }\n}\n\naddDarkTheme();","import refs from './refs';\n\nexport const onCheckTheme = () => {\n  if (refs.body.classList.contains('dark')) {\n    refs.footerModal.style.backgroundColor = '#fff';\n  } else {\n    refs.footerModal.style.backgroundColor = '#111';\n  }\n};\n","import refs from './refs';\nimport { onCheckTheme } from './on-check-theme';\n\nconst onOpenFooterModal = event => {\n  event.preventDefault();\n  refs.footerBackdrop.classList.remove('is-hidden');\n  window.addEventListener('keydown', onCloseFooterModalOnEsc);\n  refs.body.style.overflow = 'hidden';\n  onCheckTheme();\n};\n\nconst onCloseFooterModal = () => {\n  refs.footerBackdrop.classList.add('is-hidden');\n  window.removeEventListener('keydown', onCloseFooterModalOnEsc);\n  refs.body.style.overflow = 'visible';\n};\n\nconst onCloseModalOnBackdropClick = event => {\n  if (event.currentTarget === event.target) {\n    refs.footerBackdrop.classList.add('is-hidden');\n    refs.body.style.overflow = 'visible';\n  }\n};\n\nfunction onCloseFooterModalOnEsc(event) {\n  if (event.code === 'Escape') {\n    onCloseFooterModal();\n  }\n}\n\nrefs.footerBackdrop.addEventListener('click', onCloseModalOnBackdropClick);\nrefs.modalCloseBtn.addEventListener('click', onCloseFooterModal);\nrefs.footerLink.addEventListener('click', onOpenFooterModal);\n","export default class LocalStorageService {\n\n    constructor() { \n        this._watched = [];\n        this._queue = [];\n    }\n\n    //Library\n\n    getMovie(key) {\n        const watchedParseList = JSON.parse(localStorage.getItem(key));\n        \n        return watchedParseList;\n    }\n\n    addMovie(obj, key) {\n\n        switch (key) {\n\n            case 'watched':\n\n                if (this.getMovie(key) === null) {\n\n                    this._watched.push(obj);\n\n                    const userDataJSON = JSON.stringify(this._watched);\n\n                    localStorage.setItem('watched', userDataJSON);\n\n                }\n\n                let libraryWatched = this.getMovie(key);\n                \n                if (libraryWatched.find(item => item.id !== obj.id) || libraryWatched.length === 0) {\n\n                    libraryWatched.push(obj);\n\n                    const userDataJSON = JSON.stringify(libraryWatched);\n\n                    localStorage.setItem('watched', userDataJSON);\n\n                }\n                \n                break;\n            \n            case 'queue':\n\n                if (!this.getMovie(key)) {\n\n                    this._queue.push(obj);\n\n                    const userDataJSON = JSON.stringify(this._queue);\n\n                    localStorage.setItem('queue', userDataJSON);\n\n\n                }\n\n                let libraryQueue = this.getMovie(key);\n                \n                if (libraryQueue.find(item => item.id !== obj.id) || libraryQueue.length === 0) {\n\n                    libraryQueue.push(obj);\n\n                    const userDataJSON = JSON.stringify(libraryQueue);\n\n                    localStorage.setItem('queue', userDataJSON);\n\n                }\n                \n                break;\n        }\n\n    }\n\n    deleteMovie(obj, key) {\n\n        let library = this.getMovie(key);\n        let movieIndex = library.findIndex(item => item.id === obj.id);\n\n        library.splice(movieIndex, 1);\n        const userDataJSON = JSON.stringify(library);\n\n        switch (key) {\n            \n            case 'watched':\n\n                localStorage.setItem('watched', userDataJSON);\n\n                break;\n            \n            case 'queue':\n\n                localStorage.setItem('queue', userDataJSON);\n\n                break;\n        }\n\n    }\n\n    checkMovie(obj, key) {\n\n        let library = this.getMovie(key);\n\n        if (library) {\n\n            if (library.find((item) => item.id === obj.id)) return true;\n\n        }\n        \n    }\n\n}","import refs from './refs';\nimport ApiService from './api-service';\nimport genresArr from './searchMovie';\nimport emptyImg from './images/img_not_found.jpg';\nimport LocalStorageService from '../js/local-storage';\n// function onOpenCard(e) {\n//     if(e.curren)\n// }\nconst newFetchMovieById = new ApiService();\nconst localStorageService = new LocalStorageService();\n\nrefs.galleryMovies.addEventListener('click', onOpenModal);\n\nasync function onOpenModal(e) {\n  let idOfCard = e.target.parentElement.parentElement.id;\n  const fetchResponse = await newFetchMovieById\n    .fetchInfoOfFilm(idOfCard)\n    .then(filmInfo => {\n      renderMarkupOfModal(filmInfo);\n\n      //   Добавил функции добавления фильма в local storage\n\n      const watchBtn = document.querySelector('.modal_button-watch');\n      const watchBtnDelete = document.querySelector('.btn_watch-del');\n      const queueBtn = document.querySelector('.modal_button-queue');\n      const queueBtnDelete = document.querySelector('.btn_queue-del');\n\n      const watchedLibrary = localStorageService.checkMovie(filmInfo, 'watched');\n      const queueLibrary = localStorageService.checkMovie(filmInfo, 'queue');\n\n      if (watchedLibrary) {\n        watchBtn.classList.add('visually-hidden');\n        watchBtnDelete.classList.remove('visually-hidden');\n      }\n\n      if (queueLibrary) {\n        queueBtn.classList.add('visually-hidden');\n        queueBtnDelete.classList.remove('visually-hidden');\n      }\n\n      watchBtn.addEventListener('click', function addMovieInStorage(event) {\n        if (queueLibrary) {\n          localStorageService.deleteMovie(filmInfo, 'queue');\n\n          queueBtn.classList.remove('visually-hidden');\n          queueBtnDelete.classList.add('visually-hidden');\n        }\n\n        const movieKey = event.target.dataset.key;\n        localStorageService.addMovie(filmInfo, movieKey);\n\n        watchBtn.classList.add('visually-hidden');\n        watchBtnDelete.classList.remove('visually-hidden');\n      });\n\n      watchBtnDelete.addEventListener('click', function deleteMovieFromStorage(event) {\n        const movieKey = event.target.dataset.key;\n        localStorageService.deleteMovie(filmInfo, movieKey);\n\n        watchBtn.classList.remove('visually-hidden');\n        watchBtnDelete.classList.add('visually-hidden');\n      });\n\n      queueBtn.addEventListener('click', function onQueueBtnClick(event) {\n        if (watchedLibrary) {\n          localStorageService.deleteMovie(filmInfo, 'watched');\n\n          watchBtn.classList.remove('visually-hidden');\n          watchBtnDelete.classList.add('visually-hidden');\n        }\n\n        const movieKey = event.target.dataset.key;\n        localStorageService.addMovie(filmInfo, movieKey);\n\n        queueBtn.classList.add('visually-hidden');\n        queueBtnDelete.classList.remove('visually-hidden');\n      });\n\n      queueBtnDelete.addEventListener('click', function deleteQueueFromStorage(event) {\n        const movieKey = event.target.dataset.key;\n        localStorageService.deleteMovie(filmInfo, movieKey);\n\n        queueBtn.classList.remove('visually-hidden');\n        queueBtnDelete.classList.add('visually-hidden');\n      });\n    })\n    .catch(error => {\n      if (e.target.closest('.photo-card')) {\n        renderOfErrorMarkup(error);\n      }\n      return;\n    });\n}\n\nfunction renderOfModal(item) {\n  const { vote_average, original_title, genres, overview, popularity, poster_path, vote_count } =\n    item;\n  const listOfGenres = genres.length > 0 ? genres.map(genre => genre.name) : [];\n  let poster = emptyImg;\n  if (poster_path) {\n    poster = `https://image.tmdb.org/t/p/w500${poster_path}`;\n  }\n  return `\n        <div class=\"modal_info\">\n            <div class=\"modal_pic-block\">\n                <img class=\"modal_pic\" src=${poster} width=\"240px\" height=\"357px\" alt=\"${original_title}\">\n            </div>\n            \n            <div class=\"modal_info-block\">\n                <h2 class=\"modal_title\">${original_title}</h2>\n            \n                <table class=\"modal_info\">\n                    <tr>\n                        <td class=\"modal_info-colonm1\">Vote / Votes</td>\n                        <td class=\"modal_info-colonm2 rating-cell\">\n                            <div class=\"modal_info-rating\">\n                                <span>${vote_average}</span>\n                            </div>\n                            <span class=\"modal_info-line\">/</span>\n                            <div class=\"modal_info-votes\">\n                                <span>${vote_count}</span>\n                            </div>\n                        </td>\n                    </tr>\n                    <tr>\n                        <td class=\"modal_info-colonm1\">Popularity</td>\n                        <td class=\"modal_info-colonm2\">${popularity}</td>\n                    </tr>\n                    <tr>\n                        <td class=\"modal_info-colonm1\">Original Title</td>\n                        <td class=\"modal_info-colonm2 orig_title\">${original_title}</td>\n                    </tr>\n                    <tr>\n                        <td class=\"modal_info-colonm1\">Genre</td>\n                        <td class=\"modal_info-colonm2\">${listOfGenres.join(', ')}</td>\n                    </tr>\n                </table>\n            \n                <h3 class=\"modal_title-disc\">About</h3>\n                <p class=\"modal_disc\">${overview}\n                </p>\n\n                <div class=\"modal_buttons\">\n                    <button type=\"button\" data-key=\"watched\" class=\"modal_button modal_button-watch\">\n                        add to Watched\n                    </button>\n                    <button type=\"button\" data-key=\"watched\" class=\"modal_button modal_button-watch btn_watch-del visually-hidden\">\n                        Delete from watched\n                    </button>\n                    <button type=\"button\" data-key=\"queue\" class=\"modal_button modal_button-queue\">\n                        add to queue\n                    </button>\n                    <button type=\"button\" data-key=\"queue\" class=\"modal_button modal_button-queue btn_queue-del visually-hidden\">\n                        Delete from queue\n                    </button>\n                </div>\n            </div>\n        </div>\n    `;\n}\n\nconst renderMarkupOfModal = item => {\n  const markup = renderOfModal(item);\n  refs.backdrop.classList.remove('is-hidden');\n  refs.modalInfo.innerHTML = markup;\n};\n\nconst renderOfError = () => {\n  return `<div class=\"modal_info-error\">\n        <img class=\"modal-img__error\" src=\"./js/images/error-film.png\" />\n        <span class=\"modal-text__error\">Ой-ой, что-то пошло не так,попробуйте позже...</span>\n      </div>`;\n};\n\nconst renderOfErrorMarkup = item => {\n  const markup = renderOfError();\n  refs.backdrop.classList.remove('is-hidden');\n  refs.modalInfo.innerHTML = markup;\n};\n","import './sass/main.scss';\nimport './js/api-service';\nimport './js/library';\nimport './js/searchMovie';\nimport './js/modal';\nimport 'modern-normalize/modern-normalize.css';\nimport './js/movie-pagination';\nimport './js/render-home-page';\nimport './js/popularFilms';\nimport './js/btn-top';\nimport './js/moon-sun';\nimport './js/footer-modal';\nimport './js/openModal';\nimport './js/local-storage';\n"]}