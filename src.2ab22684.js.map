{"version":3,"sources":["js/refs.js","js/api-service.js","js/moviesMarkup.js","js/searchMovie.js","index.js"],"names":["refs","searchBtn","document","querySelector","galleryMovies","API_KEY","BASE_URL","ApiService","consructor","searchQuery","page","fetchMovies","endpoint","url","fetch","then","res","json","fetchMovieBySearch","fetchPopularMovie","query","newQuery","makeMovieMarkup","movies","map","title","release_date","genre_ids","poster_path","releaseYear","Date","getFullYear","poster","emptyImg","join","api","getMovie","e","preventDefault","currentTarget","elements","value","data","console","log","renderMovies","markup","results","innerHTML","addEventListener"],"mappings":";;;AAKeA,aAAAA,OAAAA,eAAAA,QAAAA,aAAAA,CAAAA,OAAAA,IAAAA,QAAAA,aAAAA,EALf,MAAMA,EAAO,CACXC,UAAWC,SAASC,cAAc,gBAClCC,cAAeF,SAASC,cAAc,oBAGzBH,IAAAA,EAAAA,EAAAA,QAAAA,QAAAA;;ACFiB,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,aAAA,EAHhC,MAAMK,EAAU,mCACVC,EAAW,+BAEF,MAAMC,EACnBC,aACOC,KAAAA,YAAc,GACdC,KAAAA,KAAO,EAGdC,YAAYC,GACJC,MAAAA,KAASP,KAAYM,aAAoBP,0BAAgC,KAAKI,oBAAoB,KAAKC,2BACtGI,OAAAA,MAAMD,GAAKE,KAAKC,GAAOA,EAAIC,QAGpCC,qBACS,OAAA,KAAKP,YAAY,gBAG1BQ,oBACOR,KAAAA,YAAY,oBAGfS,YACK,OAAA,KAAKX,YAGVW,UAAMC,GACHZ,KAAAA,YAAcY,GAxBS,QAAA,QAAA;;;;AC4BjBC,aAAAA,OAAAA,eAAAA,QAAAA,aAAAA,CAAAA,OAAAA,IAAAA,QAAAA,aAAAA,EA/Bf,IAAA,EAAA,EAAA,QAAA,mCA+BeA,SAAAA,EAAAA,GAAAA,OAAAA,GAAAA,EAAAA,WAAAA,EAAAA,CAAAA,QAAAA,GA7Bf,SAASA,EAAgBC,GAChBA,OAAAA,EACJC,IAAI,EAAGC,MAAAA,EAAOC,aAAAA,EAAcC,UAAAA,EAAWC,YAAAA,MAChCC,MAAAA,EAAc,IAAIC,KAAKJ,GAAcK,cACvCC,IAAAA,EAASC,EAAb,QAIQ,OAHJL,IACFI,oCAA2CJ,kIAIkBI,0BAChDP,2KAMaA,sDAEDE,qDAEAE,kDAK5BK,KAAK,IAGKZ,IAAAA,EAAAA,EAAAA,QAAAA,QAAAA;;ACTd,aAtBD,IAAA,EAAA,EAAA,QAAA,WACA,EAAA,EAAA,QAAA,kBACA,EAAA,EAAA,QAAA,mBAoBC,SAAA,EAAA,GAAA,OAAA,GAAA,EAAA,WAAA,EAAA,CAAA,QAAA,GAlBD,MAAMa,EAAM,IAAI5B,EAAJ,QAIZ,SAAS6B,EAASC,GAChBA,EAAEC,iBACFH,EAAIf,MAAQiB,EAAEE,cAAcC,SAAS/B,YAAYgC,MACjDN,EAAIjB,qBAAqBH,KAAK2B,IAC5BC,QAAQC,IAAIF,GACZG,EAAaH,KAKjB,SAASG,EAAaH,GACdI,MAAAA,GAAS,EAAgBJ,EAAAA,SAAAA,EAAKK,SACpCJ,QAAQC,IAAIE,GACP1C,EAAAA,QAAAA,cAAc4C,UAAYF,EAfjC9C,EAAKC,QAAAA,UAAUgD,iBAAiB,SAAUb;;ACL1C,aADA,QAAA,oBACA,QAAA","file":"src.2ab22684.js","sourceRoot":"../src","sourcesContent":["const refs = {\r\n  searchBtn: document.querySelector('.search-form'),\r\n  galleryMovies: document.querySelector('.gallery-movies'),\r\n};\r\n\r\nexport default refs;\r\n","const API_KEY = '3b4cb0b5c3c509ec710c203c7a14be66';\r\nconst BASE_URL = 'https://api.themoviedb.org/3';\r\n\r\nexport default class ApiService {\r\n  consructor() {\r\n    this.searchQuery = '';\r\n    this.page = 1;\r\n  }\r\n\r\n  fetchMovies(endpoint) {\r\n    const url = `${BASE_URL}/${endpoint}?api_key=${API_KEY}&language=en-US&query=${this.searchQuery}&page=${this.page}&include_adult=false`;\r\n    return fetch(url).then(res => res.json());\r\n  }\r\n\r\n  fetchMovieBySearch() {\r\n    return this.fetchMovies('search/movie');\r\n  }\r\n\r\n  fetchPopularMovie() {\r\n    this.fetchMovies('trending/all/day');\r\n  }\r\n\r\n  get query() {\r\n    return this.searchQuery;\r\n  }\r\n\r\n  set query(newQuery) {\r\n    this.searchQuery = newQuery;\r\n  }\r\n}\r\n","import emptyImg from '../js/images/img_not_found.jpg';\r\n\r\nfunction makeMovieMarkup(movies) {\r\n  return movies\r\n    .map(({ title, release_date, genre_ids, poster_path }) => {\r\n      const releaseYear = new Date(release_date).getFullYear();\r\n      let poster = emptyImg;\r\n      if (poster_path) {\r\n        poster = `https://image.tmdb.org/t/p/w500${poster_path}`;\r\n      }\r\n      return `<div class=\"photo-card\">\r\n        <div class=\"thumb\">\r\n            <img class=\"image\" src=\"https://image.tmdb.org/t/p/w500${poster}\"\r\n              alt=\"${title}\"\r\n              loading=\"lazy\"\r\n              width=\"309\"\r\n              height=\"449\" />\r\n        </div>\r\n        <div class=\"info\">\r\n          <h5 class=\"info-item\">${title}\r\n          </h5>\r\n          <p class=\"info-item\">${genre_ids}\r\n          </p>\r\n          <p class=\"info-item\">${releaseYear}\r\n          </p>\r\n        </div>\r\n    </div>`;\r\n    })\r\n    .join('');\r\n}\r\n\r\nexport default makeMovieMarkup;\r\n","import refs from './refs';\r\nimport ApiService from './api-service';\r\nimport makeMovieMarkup from './moviesMarkup';\r\n\r\nconst api = new ApiService();\r\n\r\nrefs.searchBtn.addEventListener('submit', getMovie);\r\n\r\nfunction getMovie(e) {\r\n  e.preventDefault();\r\n  api.query = e.currentTarget.elements.searchQuery.value;\r\n  api.fetchMovieBySearch().then(data => {\r\n    console.log(data);\r\n    renderMovies(data);\r\n  });\r\n  // .catch(err => handleError(err));\r\n}\r\n\r\nfunction renderMovies(data) {\r\n  const markup = makeMovieMarkup(data.results);\r\n  console.log(markup);\r\n  refs.galleryMovies.innerHTML = markup;\r\n}\r\n","import './sass/main.scss';\nimport './js/searchMovie';\n"]}