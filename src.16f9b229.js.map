{"version":3,"sources":["js/api-service.js","js/refs.js","js/library.js","js/moviesMarkup.js","js/searchMovie.js","index.js"],"names":["API_KEY","BASE_URL","ApiService","consructor","searchQuery","page","fetchMovies","endpoint","url","fetch","then","res","json","fetchMovieBySearch","fetchPopularMovie","query","newQuery","refs","searchBtn","document","querySelector","libraryBtn","filmContainer","galleryMovies","getData","key","responce","data","console","log","results","localStorage","setItem","JSON","stringify","dir","library","ev","target","type","getItem","name","innerHTML","addEventListener","makeMovieMarkup","movies","map","title","release_date","genre_ids","poster_path","releaseYear","Date","getFullYear","poster","emptyImg","join","api","getMovie","e","preventDefault","currentTarget","elements","value","renderMovies","markup"],"mappings":"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","file":"src.16f9b229.js","sourceRoot":"../src","sourcesContent":["const API_KEY = '3b4cb0b5c3c509ec710c203c7a14be66';\r\nconst BASE_URL = 'https://api.themoviedb.org/3';\r\n\r\nexport default class ApiService {\r\n  consructor() {\r\n    this.searchQuery = '';\r\n    this.page = 1;\r\n  }\r\n\r\n  fetchMovies(endpoint) {\r\n    const url = `${BASE_URL}/${endpoint}?api_key=${API_KEY}&language=en-US&query=${this.searchQuery}&page=${this.page}&include_adult=false`;\r\n    return fetch(url).then(res => res.json());\r\n  }\r\n\r\n  fetchMovieBySearch() {\r\n    return this.fetchMovies('search/movie');\r\n  }\r\n\r\n  fetchPopularMovie() {\r\n    this.fetchMovies('trending/all/day');\r\n  }\r\n\r\n  get query() {\r\n    return this.searchQuery;\r\n  }\r\n\r\n  set query(newQuery) {\r\n    this.searchQuery = newQuery;\r\n  }\r\n}\r\n","const refs = {\r\n  searchBtn: document.querySelector('.search-form'),\r\n  libraryBtn: document.querySelector('header'),\r\n  filmContainer: document.querySelector('.thumb'),\r\n  galleryMovies: document.querySelector('.gallery-movies'),\r\n};\r\n\r\nexport default refs;\r\n","import refs from './refs';\n\nasync function getData(page, key) {\n  const data = await fetch(\n    `https://api.themoviedb.org/3/trending/movie/day?api_key=c650d1c0c307d1ff6855b3a117a6cfa1&page=${page}`,\n  )\n    .then(responce => responce.json())\n    .then(data => {\n      console.log(data.results);\n      localStorage.setItem(key, JSON.stringify(data.results));\n      console.dir(localStorage);\n    });\n}\ngetData(1, 'watched');\n// getData(2, 'queue');\n\n// console.log(localStorage);\n\nrefs.libraryBtn.addEventListener('click', library);\n\nfunction library(ev) {\n  if (ev.target.type !== 'button') return;\n  if (localStorage.getItem(ev.target.name)) {\n    // render films\n    refs.filmContainer.innerHTML = `There are a lot of films choised by you in ${ev.target.name} section`;\n    return;\n  }\n  refs.filmContainer.innerHTML = `There are NO films choised by you in ${ev.target.name} section`;\n  //   render string \"This list is empty\"\n}\n","import emptyImg from '../js/images/img_not_found.jpg';\r\n\r\nfunction makeMovieMarkup(movies) {\r\n  return movies\r\n    .map(({ title, release_date, genre_ids, poster_path }) => {\r\n      const releaseYear = new Date(release_date).getFullYear();\r\n      let poster = emptyImg;\r\n      if (poster_path) {\r\n        poster = `https://image.tmdb.org/t/p/w500${poster_path}`;\r\n      }\r\n      return `<div class=\"photo-card\">\r\n        <div class=\"thumb\">\r\n            <img class=\"image\" src=\"https://image.tmdb.org/t/p/w500${poster}\"\r\n              alt=\"${title}\"\r\n              loading=\"lazy\"\r\n              width=\"309\"\r\n              height=\"449\" />\r\n        </div>\r\n        <div class=\"info\">\r\n          <h5 class=\"info-item\">${title}\r\n          </h5>\r\n          <p class=\"info-item\">${genre_ids}\r\n          </p>\r\n          <p class=\"info-item\">${releaseYear}\r\n          </p>\r\n        </div>\r\n    </div>`;\r\n    })\r\n    .join('');\r\n}\r\n\r\nexport default makeMovieMarkup;\r\n","import refs from './refs';\r\nimport ApiService from './api-service';\r\nimport makeMovieMarkup from './moviesMarkup';\r\n\r\nconst api = new ApiService();\r\n\r\nrefs.searchBtn.addEventListener('submit', getMovie);\r\n\r\nfunction getMovie(e) {\r\n  e.preventDefault();\r\n  api.query = e.currentTarget.elements.searchQuery.value;\r\n  api.fetchMovieBySearch().then(data => {\r\n    console.log(data);\r\n    renderMovies(data);\r\n  });\r\n  // .catch(err => handleError(err));\r\n}\r\n\r\nfunction renderMovies(data) {\r\n  const markup = makeMovieMarkup(data.results);\r\n  console.log(markup);\r\n  refs.galleryMovies.innerHTML = markup;\r\n}\r\n","import './sass/main.scss';\nimport './js/api-service';\nimport './js/library';\nimport './js/searchMovie';\nimport 'modern-normalize/modern-normalize.css';\n"]}